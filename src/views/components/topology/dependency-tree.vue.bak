/**
 * Licensed to the Apache Software Foundation (ASF) under one or more
 * contributor license agreements.  See the NOTICE file distributed with
 * this work for additional information regarding copyright ownership.
 * The ASF licenses this file to You under the Apache License, Version 2.0
 * (the "License"); you may not use this file except in compliance with
 * the License.  You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

<template>
  <RkEcharts height="100%" :option="responseConfig"/>
</template>

<script lang="ts">
import Vue from 'vue';
import { Component, Prop } from 'vue-property-decorator';
import echarts from 'echarts/lib/echarts';

@Component
export default class DependencyChart extends Vue {
  @Prop() private title!: string;
  @Prop() private data!: any;
  @Prop() private unit!: string;
  @Prop() private intervalTime!: number[];
  @Prop() private precent!: boolean;
  get content() {
    return 0;
    // if (!this.data.length) {return 0; }
    // const noZero = this.data.filter((i: any) => i);
    // const sum = noZero.length ? noZero
    // .reduce((preValue: number, curValue: number, index: number, array: number[]) => preValue + curValue)
    // / noZero.length : 0;
    // return this.precent ? sum / 100 : sum;
  }
  get responseConfig() {
    return {

    title: {
        text: "ER-数据关系1",
        top: "top",
        left: "center"
    },
    // itemStyle: {
    //     normal: {
    //         color: new echarts.graphic.LinearGradient(0, 0, 1, 0, [{
    //             offset: 0,
    //             color: '#157eff'
    //         }, {
    //             offset: 1,
    //             color: '#35c2ff'
    //         }]),
    //     },
    //     shadowBlur: 10
    // },
    textStyle: {
        color: '#333',
        fontSize: 16,
        fontWeight: 600,
    },
    legend: [{
        formatter: function(name: any) {
            return echarts.format.truncateText(name, 200, '12px', '…');
        },
        tooltip: {
            show: true
        },
        selectedMode: 'true',
        bottom: 20,
    }],
    animationDurationUpdate: 1500,
    animationEasingUpdate: 'quinticInOut',
    xAxis: {
        show: false,
        type: 'value'
    },
    yAxis: {
        show: false,
        type: 'value'
    },
    series: [{
        type: 'graph',
        layout: 'none',
        // coordinateSystem: 'cartesian2d',
        // legendHoverLink: false,
        // hoverAnimation: true,
        // nodeScaleRatio: false,
        //建头
        edgeSymbol: ['circle', 'none'],
        edgeSymbolSize: [2, 15],
        edgeLabel: {
            show: false,
            normal: {
                show: true,
                position: 'middle',
                textStyle: {
                    fontSize: 12
                },
                formatter: "{c}"
            }
        },
   
        roam: true,
        //圆形上面的文字	
        label: {
            normal: {
                position: "inside",
                show: true,
                textStyle: {
                    fontSize: 12
                },
            }
        },
        lineStyle: {
            normal: {
                width: 1,
                shadowColor: 'none',
                color: '#ff0000'
            },
        },
        data: [ {
                name: "块1",
                symbol: "circle",
                x: 10,
                y: 210,
                symbolSize: [40, 40],
                itemStyle: {
                    normal: {
                        color: new echarts.graphic.LinearGradient(0, 0, 1, 0, [{
                            offset: 0,
                            color: '#45D840'
                        }, {
                            offset: 1,
                            color: '#B7FF7D'
                        }]),
                    }
                },
            }, {
                name: "块2",
                symbol: "circle",
                x: 10,
                y: 30,
                symbolSize: [40, 40],
                itemStyle: {
                    normal: {
                        color: new echarts.graphic.LinearGradient(0, 0, 1, 0, [{
                            offset: 0,
                            color: '#45D840'
                        }, {
                            offset: 1,
                            color: '#B7FF7D'
                        }]),
                    }
                }
            }, 
            //节点B,C,D ....n
            {
                name: "机构表",
                x: 400,
                y: 250,
                symbol: "circle",
                symbolSize: [40, 40],
                itemStyle: {
                    normal: {
                        color: new echarts.graphic.LinearGradient(0, 0, 1, 0, [{
                            offset: 0,
                            color: '#ffb402'
                        }, {
                            offset: 1,
                            color: '#ffdc84'
                        }]),
                    }
                }
            }, {
                name: "产品表",
                x: 400,
                y: 290,
                symbol: "circle",
                symbolSize: [40, 40],
                itemStyle: {
                    normal: {
                        color: new echarts.graphic.LinearGradient(0, 0, 1, 0, [{
                            offset: 0,
                            color: '#ffb402'
                        }, {
                            offset: 1,
                            color: '#ffdc84'
                        }]),
                    }
                }
            }, {
                name: "客户表",
                x: 400,
                y: 150,
                symbol: "circle",
                symbolSize: [40, 40],
                itemStyle: {
                    normal: {
                        color: new echarts.graphic.LinearGradient(0, 0, 1, 0, [{
                            offset: 0,
                            color: '#ffb402'
                        }, {
                            offset: 1,
                            color: '#ffdc84'
                        }]),
                    }
                }
            }, {
                name: "合同表",
                x: 400,
                y: 100,
                symbol: "circle",
                symbolSize: [100, 40],
                itemStyle: {
                    normal: {
                        color: new echarts.graphic.LinearGradient(0, 0, 1, 0, [{
                            offset: 0,
                            color: '#ffb402'
                        }, {
                            offset: 1,
                            color: '#ffdc84'
                        }]),
                    }
                }
            }, {
                name: "其他表",
                x: 400,
                y: 50,
                symbol: "circle",
                symbolSize: [100, 40],
                itemStyle: {
                    normal: {
                        color: new echarts.graphic.LinearGradient(0, 0, 1, 0, [{
                            offset: 0,
                            color: '#ffb402'
                        }, {
                            offset: 1,
                            color: '#ffdc84'
                        }]),
                    }
                }
            }
        ],

        links: [{
            source: "贷款账户表",
            value: " ",
            target: "块1",
        }, {
            source: "贷款账户表",
            value: " ",
            target: "块1",
        }, {
            source: "贷款账户表",
            value: " ",
            target: "块2",
        }, {
            source: "贷款账户表",
            value: " ",
            target: "块2",
        }, {
            source: "贷款账户表",
            value: " ",
            target: "块1",
        }, {
            source: "块1",
            value: " ",
            target: "机构表",
        }, {
            source: "块1",
            value: " ",
            target: "产品表",
        }, {
            source: "块1",
            value: " ",
            target: "客户表",
        }, {
            source: "块2",
            value: " ",
            target: "合同表",
        }, {
            source: "块2",
            value: " ",
            target: "其他表",
        }],
    }],
};
  }
}
</script>
